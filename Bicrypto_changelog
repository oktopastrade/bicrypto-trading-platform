Update Notes - Core 5.7.7 
Update Notes

Important: Pre-Update Instructions
Before running the update, you MUST restart your VPS/server: 1. Restart your VPS (reboot the entire server) 2. After reboot, run pnpm install to update dependencies 3. Rebuild and start your application Failure to restart the server before updating may cause build failures or runtime errors due to cached processes and memory issues.
Security Fixes

    Dependency Updates: Updated to Next.js 16.1.0-canary.15 to address Turbopack stability issues
    Server External Packages: Added serverExternalPackages configuration to properly isolate server-only modules (ioredis, sharp, pino, pino-pretty)
    Build Configuration: Improved Turbopack configuration to prevent worker_threads bundling issues

Changed
Frontend Build System

    Next.js 16 Canary: Upgraded to Next.js 16.1.0-canary.15 for improved Turbopack stability
    Turbopack Configuration: Updated next.config.js with proper server external packages to fix NftJsonAsset: cannot handle filepath worker_threads build error
    Removed Deprecated Config: Cleaned up deprecated experimental.serverComponentsExternalPackages in favor of top-level serverExternalPackages

New Extension: Payment Gateway
This release introduces the Payment Gateway extension, enabling merchants to accept cryptocurrency payments from external websites and applications.
Key Features

    Multi-Wallet Payment Support: Customers can pay using multiple wallets and currencies in a single transaction
    Flexible Allocations: Split payments across FIAT, SPOT, and ECO wallet types
    Real-time Exchange Rates: Automatic currency conversion with live market rates
    Merchant Dashboard: Complete analytics, payment history, and payout management
    API Integration: RESTful API with webhooks for seamless third-party integration
    WooCommerce Plugin: Ready-to-use WordPress/WooCommerce integration
    Test Mode: Full sandbox environment for development and testing

Merchant Features

    Payment Management: View all incoming payments with detailed transaction history
    Refund Processing: Issue full or partial refunds to customers
    API Keys: Generate and manage API keys for integration
    Payout Tracking: Monitor pending and completed payouts
    Balance Overview: Real-time view of available and pending balances per currency

Admin Features

    Merchant Management: Approve, suspend, or manage merchant accounts
    Payment Oversight: Monitor all platform payments with filtering and search
    Payout Approval: Review and approve merchant payout requests
    Platform Analytics: Revenue tracking, transaction volumes, and fee collection
    Global Settings: Configure fees, payout schedules, and payment limits

Technical Implementation

    Allocation-Based Payments: Payments store allocations as JSON column for multi-wallet support
    Gateway Balance Tracking: Dedicated gatewayMerchantBalance table tracks pending/available funds separately from wallet balances
    Secure Fund Flow: Funds held in gateway balance until admin-approved payout
    Webhook System: Real-time notifications for payment events (completed, refunded, failed)

